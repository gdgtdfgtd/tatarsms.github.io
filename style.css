:root {
    --bg-dark: #1e1f22;
    --bg-side: #2b2d31;
    --bg-main: #313338;
    --accent: #5865f2;
    --accent-glow: rgba(88, 101, 242, 0.3);
    --text: #dbdee1;
    --text-muted: #949ba4;
    --danger: #f23f43;
    --success: #23a55a;
    --glass: rgba(43, 45, 49, 0.7);
}

* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { font-family: 'Inter', sans-serif; background: var(--bg-dark); color: var(--text); height: 100vh; overflow: hidden; }

.hidden { display: none !important; }

/* Анимации */
@keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes pulse { 0% { box-shadow: 0 0 0 0 var(--accent-glow); } 70% { box-shadow: 0 0 0 20px rgba(0,0,0,0); } 100% { box-shadow: 0 0 0 0 rgba(0,0,0,0); } }
@keyframes logoSpin { from { transform: rotate(0); } to { transform: rotate(360deg); } }

/* Loader */
.loader-overlay { position: fixed; inset: 0; background: var(--bg-dark); z-index: 10000; display: flex; align-items: center; justify-content: center; flex-direction: column; }
.logo-animation { width: 60px; height: 60px; background: var(--accent); border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 32px; font-weight: 800; color: white; animation: logoSpin 2s infinite ease-in-out; }
.loader-content p { margin-top: 20px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; color: var(--accent); }

/* Layout */
.app-container { display: flex; height: 100vh; }
.sidebar { width: 300px; background: var(--bg-side); border-right: 1px solid rgba(0,0,0,0.2); display: flex; flex-direction: column; transition: 0.3s; }
.sidebar-header { padding: 20px; display: flex; align-items: center; justify-content: space-between; }
.my-profile { position: relative; cursor: pointer; }
.my-profile img { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
.status-dot { width: 12px; height: 12px; border-radius: 50%; border: 2px solid var(--bg-side); position: absolute; bottom: 0; right: 0; }
.status-dot.online { background: var(--success); }

.search-bar { padding: 0 15px 15px; }
.search-bar input { width: 100%; background: var(--bg-dark); border: none; padding: 10px; border-radius: 5px; color: white; outline: none; }

.contact-list { flex: 1; overflow-y: auto; padding: 5px; }
.contact-item { display: flex; align-items: center; gap: 12px; padding: 12px; border-radius: 8px; cursor: pointer; transition: 0.2s; margin-bottom: 2px; }
.contact-item:hover, .contact-item.active { background: rgba(255,255,255,0.05); }
.contact-item img { width: 44px; height: 44px; border-radius: 50%; }

/* Chat */
.chat-window { flex: 1; background: var(--bg-main); display: flex; flex-direction: column; position: relative; }
.welcome-screen { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--text-muted); text-align: center; }
.welcome-screen i { font-size: 80px; margin-bottom: 20px; opacity: 0.1; }

.chat-header { height: 64px; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; background: var(--glass); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(0,0,0,0.1); z-index: 10; }
.header-info { display: flex; align-items: center; gap: 15px; }
.header-info img { width: 40px; height: 40px; border-radius: 50%; }

.messages { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 12px; }
.msg { max-width: 75%; animation: slideUp 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28); display: flex; flex-direction: column; }
.msg.sent { align-self: flex-end; align-items: flex-end; }
.msg-bubble { background: var(--bg-side); padding: 10px 14px; border-radius: 12px; line-height: 1.5; font-size: 15px; }
.sent .msg-bubble { background: var(--accent); color: white; border-bottom-right-radius: 2px; }
.received .msg-bubble { border-bottom-left-radius: 2px; }

.chat-input-area { padding: 20px; background: var(--bg-main); position: relative; display: flex; align-items: center; gap: 10px; }
#msg-input { flex: 1; background: #383a40; border: none; padding: 12px; border-radius: 8px; color: white; outline: none; }
.input-tools { display: flex; gap: 15px; color: var(--text-muted); font-size: 20px; }
.input-tools i { cursor: pointer; transition: 0.2s; }
.input-tools i:hover { color: white; }

/* Sticker Panel */
.sticker-panel { position: absolute; bottom: 85px; left: 20px; width: 300px; background: var(--bg-side); border-radius: 12px; padding: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 100; }
.sticker-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-height: 200px; overflow-y: auto; }
.sticker-grid img { width: 100%; cursor: pointer; transition: 0.2s; }
.sticker-grid img:hover { transform: scale(1.1); }

/* UI Elements */
.btn-primary { background: var(--accent); color: white; border: none; padding: 12px; border-radius: 6px; font-weight: 700; cursor: pointer; width: 100%; transition: 0.2s; }
.btn-primary:hover { opacity: 0.9; }
.btn-danger { background: var(--danger); color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer; width: 100%; }

.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(8px); display: flex; align-items: center; justify-content: center; z-index: 5000; }
.modal { background: var(--bg-side); padding: 30px; border-radius: 15px; width: 90%; max-width: 400px; animation: slideUp 0.4s ease; }

/* Call UI */
.call-card { text-align: center; color: white; }
.pulse { width: 100px; height: 100px; border-radius: 50%; background: var(--accent); margin: 0 auto 20px; animation: pulse 1.5s infinite; }
.video-grid { display: grid; grid-template-columns: 1fr; gap: 10px; margin: 20px 0; background: #000; border-radius: 12px; overflow: hidden; position: relative; height: 300px; }
#remote-video { width: 100%; height: 100%; object-fit: cover; }
#local-video { width: 100px; height: 75px; position: absolute; bottom: 10px; right: 10px; border-radius: 8px; border: 2px solid white; }

@media (max-width: 768px) {
    .sidebar { position: fixed; left: -100%; top: 0; bottom: 0; width: 85%; z-index: 1000; }
    .sidebar.open { left: 0; }
    .mobile-only { display: block !important; }
}
.mobile-only { display: none; }
